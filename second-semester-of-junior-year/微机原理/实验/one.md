# <font center>微机原理实验</font>

一、实验目的
    掌握简单并行接口的工作原理及使用方法。
二、实验内容
1、按下面图1-1简单并行输入接口电路图连接电路， 74LS32用实验台上的“或非门加非门实现”。74LS244为八缓冲器，8个数据输入端分别接逻辑电平开关输出K0～K7，8个数据输出端分别接数据总线D0～D7。
2、用逻辑电平开关预置某个字母的ASCⅡ码，编程输入这个ASCⅡ码，并将其对应字母在屏幕上显示出来。（注意开关顺序，从左到右，K0—K3依次为低四位，K4—K7为高四位）
三、编程提示
1、上述并行输出接口的地址为2A8H，并行输入接口的地址为2A0H，通过上述并行接口电路输出数据需要3条指令：
        MOV   AL,数据
        MOV   DX,2A8H
        OUT   DX,AL
     通过上述并行接口输入数据需要2条指令：
        MOV   DX,2ADH
        IN    AL,DX

2. 单根连线方法：  B0—KO、B1—K1、B2—K2、B3—K3 B4—K4、B5—K5、B6—K6、B7—K7 CS244-----------2A0~2A7H。
    也可以用排线代替：PL244-2----PK2
    CS244-----------2A0~2A7H。以下实验用排线代替，做实验时老师学生自选。

##   实验01_2_简单并行接口74LS273（扩展）

  

一、实验目的
    掌握简单并行接口的工作原理及使用方法。
二、实验内容
1、按下面图2-1简单并行输出接口电路图连接线路， 74LS32用实验台上的“或非门与非门实现”。74LS273为八D触发器，8个D输入端分别接数据总线D0～D7，8个Q输出端接LED显示电路L0～L7。
2、编程从键盘输入一个字符或数字（不要用小键盘输入），将其ASCⅡ码通过这个输出接口输出，根据8个发光二极管发光情况验证正确性。
三、编程提示
1、上述并行输出接口的地址为2A8H，并行输入接口的地址为2A0H，通过上述并行接口电路输出数据需要3条指令：
        MOV   AL,数据
      	 MOV   DX,2A8H
        OUT   DX,AL
     通过上述并行接口输入数据需要2条指令：
        MOV   DX,2ADH
        IN    AL,DX
2．排线连线方法：
PL273_2----PL1
CS273-----------2A8~2AFH
或者单根连线方法：
CS273-----------2A8~2AFH
1Q—LO       2Q—L1
3Q—L2       4Q—L3
5Q—L4       6Q—L5
7Q—L6       8Q—L7

## 实验02_1_七段数码管静态显示
一、实验目的
    掌握数码管显示数字的原理
二、实验内容
１、静态显示:按图2-1连接好电路，将8255的A口PA0～PA6分别与七段数码管的段码驱动输入端a～ｇ相连，位码驱动输入端S1接PC1，S0接PC0。编程从电脑键盘（不能使用小键盘）输入一位十进制数字(0～9)，在七段数码管上显示出来。
三、编程提示
1、实验台上的七段数码管为共阴型，段码采用同相驱动，输入端加高电平,选中的数码管亮，位码输入端低电平选中。
2、排线连线方法：
8255_CS—---288H~28FH
PA2---------PL4
PC2---------PL3
或者单根连线方法：
8255_CS—---288H~28FH
PAO—A        PA1--B
PA2—C        PA3--D
PA4—E        PA5--F
PA6—G        PA7--DP
PCO—S0       PC1—S1
PC2—S2       PC3---S3
PC4—S4       PC5—S5

##  实验02_2_七段数码管动态显示
一、实验目的
    掌握数码管显示数字的原理
二、实验内容
动态显示：按图2-2连接好电路，七段数码管段码连接不变，位码驱动输入端S1，S0接8255 C口的PC1，PC0。编程在两个数码管上显示“66”
三、编程提示
     1．实验台上的七段数码管为共阴型，段码采用同相驱动，输入端加高电平,选中的数码管亮，位码输入端低电平选中。
     2．排线连线方法：
8255_CS—---288H~28FH  
PA2---------PL4
PC0---------S0 
PC1---------S1  
或者单根连线方法：
8255_CS—---288H~28FH
PC0---------S0 
PC1---------S1
PAO—A        PA1--B
PA2—C        PA3--D
PA4—E        PA5--F
PA6—G        PA7--DP

##   实验02_3_七段数码管动态显示
一、实验目的
    掌握数码管显示数字的原理
二、实验内容
动态显示（选作）：编程在两个数码管上循环显示“00-99”。
三、编程提示
1．实验台上的七段数码管为共阴型，段码采用同相驱动，输入端加高电平,选中的数码管亮，位码输入端低电平选中
2．排线连线方法：
8255_CS—---288H~28FH
PA2---------PL4
PC0---------S1
PC1---------S0
或者单根连线方法：
8255_CS—---288H~28FH
PC0---------S1
PC1---------S0
PAO—A        PA1--B
PA2—C        PA3--D
PA4—E        PA5--F
PA6—G        PA7--DP

##  实验03_IO地址译码
一、实验目的
    掌握I/O地址译码电路的工作原理。
二、实验原理和内容
    实验电路如图3-1所示，其中74LS74为D触发器，可直接使用实验台上数字电路实验区的D触发器,74LS138为地址译码器。译码输出端Y0～Y7在实验台上“I/O地址”输出端引出，每个输出端包含8个地址，Y0：280H～287H，Y1：288H～28FH，……  当CPU执行I/O指令且地址在280H～2BFH范围内，译码器选中，必有一根译码线输出负脉冲。
   	例如：执行下面两条指令
             MOV  DX，2A0H
             OUT  DX，AL（或IN  AL，DX）
          Y4输出一个负脉冲，执行下面两条指令
             MOV  DX，2A8H
             OUT  DX，AL（或IN  AL，DX）
          Y5输出一个负脉冲。
利用这个负脉冲控制L7闪烁发光（亮、灭、亮、灭、……），时间间隔通过软件延时实现。
三、编程提示
1、实验电路中D触发器CLK端输入脉冲时，上升沿使Q端输出高电平L7发光，CD端加低电平L7灭。
连线：
2A0～2A7H---CLK
2A8～2AFH---CD
SD--+5V
Q--L7

## 实验04_继电器控制
一、实验目的
   1、了解微机控制直流继电器的一般方法。
   2、进一步熟悉使用8255、8253。
二、实验内容
实验电路如图4-1，按虚线连接电路：CLK0接1MHZ，GATE0，GATE1，接+5V，8253CS接280H，8255CS接288H。OUT0接CLK1，OUT1接PA0，PC0接继电器驱动电路的开关输入端Ik。继电器常开触发光LED灯。编程使用8253定时，让继电器周而复始的闭合5秒钟(指示灯灯亮)，断开5秒钟(指示灯灯灭)。
三、编程提示
    1．将8253计数器0设置为方式3、计数器1设置为方式0并联使用，CLK0接1MHZ时钟，设置两个计数器的初值（乘积为5000000）启动计数器工作后，经过5秒钟OUT1输出高电平。通过8255A口查询OUT1的输出电平，用C口PC0输出开关量控制继电器动作。
2．继电器开关量输入端输入“1”时，继电器常开触点闭合，电路接通，发光二极管亮，输入“0”时断开，发光二极管灭。
连线：
8255_CS--288H~28FH
8253_CS--280H~287H
CLK0--1MHz
OUT0--CLK1
GATE0--+5v
OUT1--PA0
GATE1--+5V
PC0--Ik

## 实验05_竞赛抢答器

一、实验目的
1、了解微机化竞赛抢答器的基本原理。
2、进一步学习使用并行接口。
二、实验内容
图5-1为竞赛抢答器(模拟)的原理图，逻辑开关K0～K7代表竞赛抢答按钮0～7号，当某个逻辑电平开关置“１”时，相当某组抢答按钮按下。在七段数码管上将其组号(0～7)显示出来。
三、编程提示
1．设置8255为C口输入、A口输出，读取C口数据，若为0表示无人抢答，若不为0则有人抢答。根据读取数据可判断其组号。从键盘上按空格键开始下一轮抢答，按其它键程序退出。
2．排线连线方法：
8255_CS—288H~28FH
PA2—PL4
S1---GND
PC2—PK2
或者单根连线：
8255_CS—288H~28FH
PA7—DP     PA6—G
PA5—F      PA4—E
PA3—D      PA2—C
PA1—B      PA0—A
S1—GND     
PCO--KO     PC1—K1
PC2—K2     PC3—K3
PC4—K4     PC5—K5 
PC6—K6     PC7—K7

##  实验06_交通灯控制实验

一、实验目的 
    通过并行接口8255实现十字路口交通灯的模拟控制,进一步掌握对并行口的使用。
二、实验内容
如图6-1，L7、L6、L5作为南北路口的交通灯与PC6、PC7、PC5相连，L2、L1、L0作为东西路口的交通灯与PC0、PC1、PC2相连。编程使六个灯按交通灯变化规律亮灭。
三、编程提示: 
1.十字路口交通灯的变化规律要求：
（1） 南北路口的绿灯、东西路口的红灯同时亮30秒左右。
（2） 南北路口的黄灯闪烁若干次，同时东西路口的红灯继续亮。
（3） 南北路口的红灯、东西路口的绿灯同时亮30秒左右。
（4） 南北路口的红灯继续亮、同时东西路口的黄灯亮闪烁若干次。
（5） 转(1)重复。

2. 连线注意LED灯的颜色不要弄错。
连线：
8255_CS--288H
PC7----L6
PC6----L7
PC5----L5
PC2----L0
PC1----L1
PC0----L2

##  实验10_温度传感实验
一、实验目的：
了解热敏电阻测温基本工作原理及小信号放大器工作原理和零点、增益的调整方法。 
二、实验内容：
1、电路原理如图10-1。
2、编程实现使用电桥将热敏电阻阻值变化转换为电压信号放大以后经A/D转换为数字量由CPU处理，在屏幕上显示出来。
三、编程提示：
1．实验接线：0809_CS—298H~29FH。温度传感信号ANZ接入ADC0809的INO。

## 实验11_压力传感实验

一、实验目的：
了解力-电信号转换的基本工作原理，掌握ADC0809的使用方法，提高数据处理程序的设计和调试能力。
二、实验内容：
1、电路原理如图11-1。当在应变片上施加一力时，引起电桥不平衡，压力信号转换为微弱的电压信号，经LM324运算放大器，把信号放大至0 - 5V，作为ADC0809输入信号。
2、ADC0809能与CPU直接接口，其输入电压为0 - 5V，本实验中以A2.A1.A0作为通道地址线，CPU对AD0809执行写操作时锁存通道地址。
3、编写并调试出一个实验程序，其功能将一力施加于压力传感器金属弹性元件表面，实验平台上数码管显示力的数据，并随力的大小而变化。
三、编程提示：
1．	压力传感信号ANO接入ADC0809的INO。实验接线：0809CS—298H~29FH。

## 实验12_电子琴
一、实验目的 
1、通过8253产生不同的频率信号，使PC机成为简易电子琴。
2、了解利用8255和8253产生音乐的基本方法。
二、实验内容
实验电路如图16-1，8253的CLK0接1MHZ时钟，GATE0接8255的PA1，OUT0和8255的PA0接到与非门的两个输入端，J13跳线连接喇叭，编程使计算机的数字键1、2、3、4、5、6、7作为电子琴按键(不用小键盘)，按下即发出相应的音阶。
三、编程提示: 
1、利用8255的PA0口来施加控制信号给与非门，用来控制扬声器的开关状态。再利用设置不同的计数值，使8253产生不同频率的波形，使扬声器产生不同频率的音调，达到类似与音阶的高低音变换。对于音乐，每个音阶都有确定的频率。
各音阶标称频率值:
音 阶		1	2	3	4	5	6	7	1*
低频率(单位:Hz)	262	294	330	347	392	440	494	524
高频率(单位:Hz)	524	588	660	698	784	880	988	1048
2、连线：8255_CS--288H—28FH
8253_CS--280H—287H
CLK0-----1MHz
PA0------AND_A
OUT0-----AND_B
PA1------GATE0
AND_Y----VIN            INPUT----VOUT
注意接上扬声器的跳帽。

## 实验13_步进电机控制实验
一、实验目的
1、了解步进电机控制的基本原理。
2、掌握控制步进电机转动的编程方法。
二、实验内容	
1、按图13-1连接线路，利用8255输出脉冲序列，开关K0～K6控制步进电机转速，K7控制步进电机转向。
排线连线方法：8255 CS--288H～28FH。PA0～PA3接BA～BD；PC2接PK2。
或者单根连线方法：
8255 CS--288H～28FH
PA0—BA       PA1—BB
PA2—BC       PA3—BD
PCO—KO      PC1—K1
PC2—K2      PC3—K3
PC4—K4      PC5—K5 
PC6—K6      PC7—K7 
2、编程:当K0～K6中某一开关为“1”(向上拨)时步进电机启动。K7向上拨电机正转，向下拨电机反转。
三、实验说明
1．步进电机驱动原理是通过对每相线圈中的电流的顺序切换来使电机作步进式旋转。驱动电路由脉冲信号来控制，所以调节脉冲信号的频率便可改变步进电机的转速。
如图18-2所示：本实验使用的步进电机用直流＋5V电压，每相电流为0.16A，电机线圈由四相组成，即:φ1(BA)；φ2(BB)；φ3(BC)；φ4(BD)
驱动方式为二相激磁方式，各线圈通电顺序如下表。
     顺序  相	φ１	φ２	φ３	φ４	反时针方向回转
	  0		 1	 1		0		0		|
	  1		 0	 1		1		0		|
	  2		 0	 0		1		1		|
	  3		 1	 0		0		1				正时针方向回转
表中首先向φ1线圈－φ2线圈输入驱动电流，接着φ2－φ3，φ3－φ4，φ4－φ1，又返回到φ1－φ2，按这种顺序切换，电机轴按顺时针方向旋转。
实验可通过不同长度延时来得到不同频率的步进电机输入脉冲，从而得到多种步进速度。

##  实验14_直流电机转速控制实验
一、实验目的
1、进一步了解DAC0832的性能及编程方法。
2、了解直流电机控制的基本方法。
二、实验内容
1、按图14-1线路接线。
排线连线方法：
0832_CS--290H～297H，Ub--DCIN插孔，8255 CS接288H～28FH,PC2--PK2。
或者单根连线方法：
0832_CS--290H～297H
8255 CS--288H～28FH 
Ub—DCIN
PCO—KO        PC1—K1
PC2—K2        PC3—K3
PC4—K4        PC5—K5 
2、编程利用DAC0832输出一串脉冲，经放大后驱动小直流电机，利用开关K0～K5控制改变输出脉冲的电平及持续时间，达到使电机加速，减速之目的。
三、实验原理简述
1．小直流电机的转速是由Ub输出脉冲的占空比来决定的，正向占空比越大转速越快，反之越慢。见图14-2例:
在本实验中，模拟量输出Ub为双极性，当输入数字量小于80H时输出为负，输入等于80H时为0V，输入大于80H时输出为正。因而本实验中，DAC0832输入数字量只有2个(80H和FFH)，通过不同的延迟时间达到改变小电机转速的目的。

##  实验17_1_双色点阵发光二极管显示实验（逐行逐列显示）
一、实验目的
1、了解双色点阵LED显示器的基本原理。
2、掌握PC机控制双色点阵LED显示程序的设计方法。
二、实验原理
点阵LED显示器是将许多LED类似矩阵一样排列在一起组成的显示器件，双色点阵LED是在每一个点阵的位置上有红绿或红黄或红白两种不同颜色的发光二极管。当微机输出的控制信号使得点阵中有些LED发光，有些不发光，即可显示出特定的信息，包括汉字、图形等。车站广场由微机控制的点阵LED大屏幕广告宣传牌随处可见。
实验仪上设有一个共阳极8×8点阵的红黄两色LED显示器，其点阵结构如图所示。该点阵对外引出24条线，其中8条行线，8条红色列线，8条绿色列线。若使某一种颜色、某一个LED发光，只要将与其相连的行线加高电平，列线加低电平即可。
三、实验内容: 
1、实验仪上的点阵LED及驱动电路如下图所示，行代码、红色列代码、绿色列代码各用一片74LS273锁存。行代码输出的数据通过行驱动器加至点阵的8条行线上，红和绿列代码的输出数据通过驱动器分别加至红和绿的列线上。行锁存器片选信号为CS1,红色列锁存器片选信号为CS2，绿色列锁存器片选信号为CS3。
2、接线方法:行片选信号行选接280H；红列片选信号红选接288H；绿列片选信号绿选接290H。
3、编程重复使LED点阵红色逐列点亮，再绿色逐列点亮，再红色逐行点亮，绿色逐行点亮。

##  实验17_2_双色点阵发光二极管显示实验（2字显示）

一、实验目的
1、了解双色点阵LED显示器的基本原理。
2、掌握PC机控制双色点阵LED显示程序的设计方法。
二、实验原理
点阵LED显示器是将许多LED类似矩阵一样排列在一起组成的显示器件，双色点阵LED是在每一个点阵的位置上有红绿或红黄或红白两种不同颜色的发光二极管。当微机输出的控制信号使得点阵中有些LED发光，有些不发光，即可显示出特定的信息，包括汉字、图形等。车站广场由微机控制的点阵LED大屏幕广告宣传牌随处可见。
实验仪上设有一个共阳极8×8点阵的红绿两色LED显示器，其点阵结构如图所示。该点阵对外引出24条线，其中8条行线，8条红色列线，8条绿色列线。若使某一种颜色、某一个LED发光，只要将与其相连的行线加高电平，列线加低电平即可。
例如欲显示数字“2”，采用逐列循环发光。首先由“2”的点阵轮廓，确定点阵代码(如图所示)根据“2”的点阵代码，确定逐列循环发光的顺序即可在LED上稳定的显示出红色“2”字。若想显示绿色“2”，只需把红色列码改为绿色列码即可。
三、实验内容: 
1、实验仪上的点阵LED及驱动电路如下图所示，行代码、红色列代码、绿色列代码各用一片74LS273锁存。行代码输出的数据通过行驱动器7407加至点阵的8条行线上，红和绿列代码的输出数据通过驱动器DS75452反相后分别加至红和绿的列线上。行锁存器片选信号为CS1,红色列锁存器片选信号为CS2，绿色列锁存器片选信号为CS3。
2、接线方法:行片选信号CS1 接280H；红列片选信号 CS2 接288H；绿列片选信号 CS3 接 290H。
    3、编程在LED上重复显示红色“2”和绿色“2”,黄色“2”。

##   实验21_1_可编程定时器计数器8253

1. 一、实验目的
       掌握8253的基本工作原理和编程方法。
2. 二、实验内容
   按图21-1虚线连接电路，将计数器0设置为方式0，计数器初值为N(N≤0FH)，用手动逐个输入单脉冲，编程使计数值在屏幕上显示，并同时用逻辑笔观察OUT0电平变化。当输入N+1个脉冲后，电平发生变化（即高变低，低变高）。
3. 三、编程提示
   1、8253控制寄存器地址		283H
   		计数器0地址	280H
   		计数器1地址	281H
   		CLK0连接时钟	1MHZ
   2、连线：
   8253_CS—280H~287H
   CLK0----PULSE1+
   GATE0---+5V
   OUT0----L0
   CLK0可接单脉冲发生器或1MHZ信号。

##   实验21_2_可编程定时器计数器8253

一、实验目的
    掌握8253的基本工作原理和编程方法。
二、实验内容
1、按图21-2连接电路，将计数器0、计数器1分别设置为方式3，计数初值设为1000，用逻辑笔观察OUT1输出电平的变化(频率1HZ)。
三、编程提示
1、8253控制寄存器地址		283H
		计数器0地址	280H
		计数器1地址	281H
		CLK0连接时钟	1MHZ
2、按图连线：
8253_cs--280~287H
CLK0----1MHz
GATE0---+5
GATE1---+5
CLK1----OUT0
OUT1----L1

##   实验21_3_可编程定时器计数器8253

一、实验目的
    掌握8253的基本工作原理和编程方法，用示波器观察不同方式下的波形。
二、实验原理和内容
1、按图21-3连接电路，将计数器0设置为方式3（方波），计数器设置为方式2（分频）。
 2、实现计数器0的输出为方波，计数器1的输出是计数器0输出的分频波形。
    3、人机交互界面设计：实现在显示屏幕上提示输入计数器0（方波）的参数和计数器1（分频信号）的参数。如下所示：
    counter0:
    counter1:
    continue?(y/n)
    4、实现用键盘直接输入修改程序中方波的参数和分频信号的参数，以改变方波的宽度，分频信号的周期和分频数，不需重新修改源代码。
5、用示波器观察计数器0和计数器1的输出波形及其关系，并在纸上画出CLK0、OUT0、OUT1的波形。
三、编程提示
1．按图连线：
8253_cs—280H~287H
CLK0----1MHz
GATE0---+5V
GATE1---+5V
CLK1----OUT0

##   实验22_1_可编程并行接口（8255方式0）

一、实验目的
    掌握8255方式0的工作原理及使用方法。
二、实验内容
１、实验电路如图22-1，8255C口接逻辑电平开关K0～K7，A口接LED显示电路L0～L7。
２、编程从8255C口输入数据，再从A口输出。
三、编程提示
1、8255控制寄存器端口地址	28BH
		A口的地址	288H 
		C口的地址	28AH
2．排线连线方法：
8255_CS—288H~28FH
PC2—PK2
PA2—PL1。
或者单根连线方法：
8255_CS—288H~28FH
PC0—K0      PC1—K1
PC2—K2      PC3—K3
PC4—K4      PC5—K5
PC6—K6      PC7—K7
PA0—LO      PA1—L1
PA2—L2      PA3—L3
PA4—L4      PA5—L5
PA6—L6      PA7—L7

##   实验22_2_可编程并行接口（8255方式0）



一、实验目的
    1、通过实验，掌握8255工作于方式0以及设置A口为输出口，C口为输入口的方法。
    2、掌握8255三个数据端口与被测IC芯片的硬件连接方法。
    3、通过实验掌握用8255并行口模拟集成电路测试仪，对集成电路进行逻辑测试的方法。
二、实验内容
1、按图22-2连接硬件电路，以测试译码器74LS138为例。
    
    2、人机交互界面设计：按照集成电路74LS138芯片的引脚图显示在屏幕上，如下所示：
                     +------------------------------+
                     |Y0  Y1  Y2  Y3  Y4  Y5  Y6  Y7|
                     |                              |
                     |           74LS138            |
                     |                              |
                     |   A    B    C   G1  G2A+G2B  |
                     +------------------------------+
                            Test Again ?(Y/N)
    3、从电脑键盘按键输入“0”、“1”，依次对A、B、C置位，G1和G2A+G2B分别置1、0选通，相应译码输出从Y0—Y7显示。
三、编程提示
   1. 8255控制寄存器端口地址	28BH
		A口的地址	288H 
		C口的地址	28AH
2.连线：74LS138接在通用IO口的20脚座子上
8255_CS—288H~28FH
4----5
PA3--4
PA4--6
PA5--3
PA6--2
PA7--1
PC0--29
PC1--28
PC2--27
PC3--26
PC4--25
PC5--24
PC6--23
PC7--7
30--+5V

    8--GND

